# 事务

- 事务是用户定义的一个数据库操作序列，这些操作要么全做，要么全不做，是一个不可分割的工作单位。

- 事务以 begin transaction 开始，以commit 或者 rollback 结束

    - commit 表示提交，即将事务中对数据库的所有更新写入到磁盘上的物理数据库中，事务正常结束。
    - rollback 表示回滚，即在事务的运行过程中发生了某种故障，事务不能继续执行，系统将对事务中对数据库的所有已完成的操作全部撤销，回滚到事务开始时的状态。


## 事务的ACID特性
- 事务具有四个特性：原子性(atomicity)、一致性、隔离性和持续性。
1. 原子性

    事务是数据库的逻辑工作单位，事务中的所有操作要么做，要么全不做

2. 一致性

    事务执行的结果必须是从一个一致性状态转移到另一个一致性状态。
    
    因此当数据库中只包含成功事务提交的结果是，就说数据库处于一个一致性状态

    由此可见，一致性和原子性是密切相关的。

3. 隔离性

    一个事务的执行不能被其他事务干扰。
    
    即一个事务的内部操作以及使用的数据对象对其他并发事务是隔离的，并发控制的各个事务之间不能互相干扰。


4. 持续性

    持续性也成为了永久性。

    即一个事务的内部操作一旦提交，那么它对数据库中数据的改变就应该是永久的，接下来的其他操作或故障不应该对其执行结果有任何的影响。


- 事务是恢复和并发控制的基本单位。保证事务ACID特性是事务管理中的重要任务。

***

